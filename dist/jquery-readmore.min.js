String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(a){a.fn.readmore=function(b){var c={chars:50,moreText:"More...",lessText:"Less",newline:!1,duration:1e3,prefix:"readmore"};return b=a.extend({},c,b),this.each(function(){function c(a,b){for(var c=!1,d="",e=0;e<a.length;e++){var f=a.charAt(e);if("<"==f)c=!0;else if(">"==f)c=!1;else if(c||/\s/.test(f)||(d+=f),d==b)return e+1}return e}var d=a(this).text().trim(),e=a(this).html().trim(),f="readmore-original";a(this).data(f)?(e=a(this).data(f),d=a(this).text(),a(this).html(e)):a(this).data(f,e);var g=d.split(/\s/),h=0,i=0;for(i=0;i<g.length&&(h+=g[i].length+1,!(h>=b.chars));i++);for(var j="",k=e,l=0;i>l;l++){var m=c(k,g[l]);j+=k.slice(0,m),k=k.slice(m)}var n="boolean"==typeof b.newline?b.newline?"<br>":"&nbsp;":b.newline,o='<span class="'+b.prefix+'-show">'+j+'</span><span class="'+b.prefix+'-rest">'+k+'</span><span class="'+b.prefix+'-newline">'+n+'</span><a class="'+b.prefix+'-toggle" href="">'+b.moreText+"</a>";a(this).html(o),a("."+b.prefix+"-rest",this).hide(),a("."+b.prefix+"-toggle",this).click(function(){var c=b.moreText,d=a(this).siblings("."+b.prefix+"-rest"),e=a(this);return e.text().trim()==b.lessText?(e.css("display","none",b.duration),d.animate({opacity:0},b.duration,function(){a(this).css("display","none"),e.css("display","inline")})):(c=b.lessText,e.hide(0),e.show(b.duration),d.css({opacity:0,display:"inline"}).animate({opacity:1},b.duration)),e.text(c),!1})})}}(jQuery);