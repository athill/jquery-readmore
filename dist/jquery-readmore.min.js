String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(a){a.fn.readmore=function(b){var c={chars:50,moreText:"More...",lessText:"Less",newline:!1,speed:1e3,prefix:"readmore"};return b=a.extend({},c,b),this.each(function(){function c(a,b){for(var c=!1,d="",e=0;e<a.length;e++){var f=a.charAt(e);if("<"==f)c=!0;else if(">"==f)c=!1;else if(c||/\s/.test(f)||(d+=f),d==b)return e+1}return e}var d=a(this).text().trim(),e=a(this).html().trim(),f=d.split(/\s/),g=0,h=0;for(h=0;h<f.length&&(g+=f[h].length+1,!(g>=b.chars));h++);for(var i="",j=e,k=0;h>k;k++){var l=c(j,f[k]);i+=j.slice(0,l),j=j.slice(l)}var m="boolean"==typeof b.newline?b.newline?"<br />":"&nbsp;":b.newline,n='<span class="'+b.prefix+'-show">'+i+'</span><span class="'+b.prefix+'-rest" style="display: inline !important;">'+j+'</span><span class="'+b.prefix+'-newline">'+m+'</span><a class="'+b.prefix+'-toggle" href="">'+b.moreText+"</a>";a(this).html(n),a("."+b.prefix+"-rest",this).hide(),a("."+b.prefix+"-toggle",this).click(function(){var c=b.moreText,d=a(this).siblings("."+b.prefix+"-rest");return a(this).text().trim()==b.lessText?d.animate({opacity:0},b.speed,function(){a(this).css("display","none")}):(c=b.lessText,d.css({opacity:0,display:"inline"}).animate({opacity:1},b.speed)),a(this).text(c),!1})})}}(jQuery);